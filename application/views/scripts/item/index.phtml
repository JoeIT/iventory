<script>
$(document).ready(function () {

	$('#searchLink').click(function(){
	});
	
	$('.search_component').change(function(){
		var indexBaseURL = $('#search_link').attr('indexURL') + '/index';

		var url = '';
		$('.search_component').each(function(){
			
			var value = $.trim( $(this).val() );

			if(! value.length == 0 )
				url += '/' + $(this).attr('id') + '/' + value;
		});

		$('#search_link').attr('href', indexBaseURL + url);
	});	
});
</script>

<h1>Lista items:</h1>
<div align="right">
			<a
				href='<?php
				echo $this->url ( array (
						'controller' => 'item',
						'action' => 'add' 
				), 'default', true )?>'>
					<img src="<?php echo $this->rootPath ?>images/add.png" title="AGREGAR" border="0"> AGREGAR
			</a>

			<br/>
			<b>Total items registrados: <?php echo $this->totalItems;?> </b>
</div>

<div id='content_left'>
	<table class='css-table-search' align='center'>
		<tr>
			<th colspan='2'>Buscador</th>
		</tr>
		<tr>
			<th>Codigo</th>
			<td><input type='text' id='code' name='code' class='search_component' value='<?php echo $this->code;?>'/></td>
		</tr>
		<tr>
			<th>Tipo</th>
			<td><?php echo $this->typeSelect; ?></td>
		</tr>
		<tr>
			<th>Nombre</th>
			<td><input type='text' id='name' name='name' class='search_component' value='<?php echo $this->name;?>'/></td>
		</tr>
		<tr>
			<th>Marca</th>
			<td><?php echo $this->brandSelect; ?></td>
		</tr>
		<tr>
			<th>Procedencia</th>
			<td><?php echo $this->originSelect; ?></td>
		</tr>
		<tr>
			<th>Ubicacion</th>
			<td><?php echo $this->locationSelect; ?></td>
		</tr>
		<tr>
			<td colspan='2' align='center'>
			
			<?php
			$indexURL = $this->url ( array ('controller' => 'item', 'action' => 'index'), 'default', true );
			?>
				<a id='search_link' 
					href='<?php echo $indexURL . '/index' . $this->extraSearchURL;?>' 
					indexURL ='<?php echo $indexURL;?>'>
						<img src="<?php echo $this->rootPath ?>images/search.png" title="BUSCAR" border="0"> BUSCAR
				</a>
			</td>			
		</tr>
	</table>
</div>

<table border="0" align="center" class="css-table-index">
	<tr>
		<th>C&oacute;digo</th>
		<th>Nuevo c&oacute;digo</th>
		<th>Tipo</th>
		<th>Nombre</th>
		<th>Marca</th>
		<th>Procedencia</th>
		<th>Ubicaci&oacute;n</th>
		<th colspan="3"></th>
	</tr>

	<?php
	foreach ( $this->dataList as $item ) {
		?>
	<tr title="<?php echo $item->getComment(); ?>">
		<td><?php echo $item->getCode(); ?></td>
		<td><?php echo $item->getNewCode(); ?></td>
		<td><?php echo $item->getType()->getName(); ?></td>
		<td><?php echo $item->getName(); ?></td>
		<td><?php echo $item->getBrand()->getName(); ?></td>
		<td><?php echo $item->getOrigin()->getName(); ?></td>
		<td><?php echo $item->getLocation()->getName(); ?></td>
		<td>
			<a
				href='<?php		
				echo $this->url ( array (
								'controller' => 'item',
								'action' => 'view',
								'id' => $item->getId () 
						), 'default', true )?>'><img src="<?php echo $this->rootPath ?>images/view.png" title="VER">
			</a>
		</td>
		<td>
			<a
				href='<?php		
				echo $this->url ( array (
								'controller' => 'item',
								'action' => 'edit',
								'id' => $item->getId () 
						), 'default', true )?>'><img src="<?php echo $this->rootPath ?>images/edit.png" title="EDITAR">
			</a>
		</td>
		<td>
			<a
				href='<?php				
				echo $this->url ( array (
								'controller' => 'item',
								'action' => 'remove',
								'id' => $item->getId () 
						), 'default', true )?>'><img src="<?php echo $this->rootPath ?>images/remove.png" title="BORRAR">
			</a>
		</td>
	</tr>
	<?php
	}
	?>	
</table>

<div align="center" class="paginator_field">
			<?php echo $this->htmlPaginator; ?>
</div>

